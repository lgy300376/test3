编码实现 一个状态机 
